### 1명일 때: 0

### 2명일 때: 1

### 3명일 때: 2

> a 자리에 올 수 있는 선물이 2 가지고, 여기서 선택한 선물을 제외하고 나머지 두 가지 선물을 두 명이 나눠 갖는 경우는 1가지다.

```
각 사람을 a b c라고 하면,
b c a
c a b
가 가능하다.
```

자기 자신의 선물도 가질 수 있는 경우의 수 : 3!

a가 자신의 선물을 갖는 경우의 수 : 2! `a b c`, `a c b`

b가 자신의 선물을 갖는 경우의 수 : 2! `a b c`, `c b a`

c가 자신의 선물을 갖는 경우의 수 : 2! `a b c`, `b a c`

a, b가 동시에 자신의 선물을 갖는 경우의 수 : 1 `a b c`

b, c가 동시에 자신의 선물을 갖는 경우의 수 : 1 `a b c`

c, a가 동시에 자신의 선물을 갖는 경우의 수 : 1 `a b c`

a, b, c가 동시에 자신의 선물을 갖는 경우의 수 : 1 `a b c`

3! - 2! - 2! - 2! + 1 + 1 + 1 - 1 = 2

### 4명일 때: 9

> a 자리에 올 수 있는 선물이 3 가지고, 여기서 선택한 선물을 제외하고 나머지 세 가지 선물을 세 명이 나눠 갖는 경우는 3가지다.

```
a b c d
  b c d a
  b a d c
  b d a c
  c a d b
  c d b a
  c d a b
  d일 때 3가지
```

4! - 3! - 3! - 3! - 3! + 2! + 2! + 2! + 2! + 2! + 2! - 1 - 1 - 1 - 1 + 1

### 5명일 때

$_5C_0 * 5! -\ _5C_1 * 4! +\ _5C_2 * 3! -\ _5C_3 * 2! +\ _5C_4 * 1! -\ _5C_5 * 0!$ = 44

### n명일 때

$_nC_0 * n! -\ _nC_1 * 4! +\ _nC_2 * 3! -\ _nC_3 * 2! +\ _nC_4 * 1! - ... ± \ _nC_n * 0!$

> $_nC_n$ 앞의 부호 ±는 n이 짝수면 +, 홀수면 -다.

이를 구할 때, $_nC_n * 0!$부터 반대로 구하면 더 수월하다.

$_nC_n =\ _nC_0$이므로, $_nC_n * 0!$은 1 \* 1이 된다.

$_nC_{n-1} =\ _nC_1$이므로 $_nC_{n-1} * 1!$은 n \* 1이 된다.

> +, - 기호로 구분할 때 각 항의 분자는 항상 n!이다.

$n! - n! + {n!\over{2}} - {n!\over{3*2}} + {n!\over{4*3*2}} - ... ± {n!\over{n!}}$

이를 부호에 관계없이 반대 순서로 구하면 다음과 같다.

1, n, n(n-1), n(n-1)(n-2), ... n!/2, n!, n!

> 뒤의 두 n!은 서로의 부호가 달라 상쇄되므로 무시하면 마지막 항은 n!/2가 된다.

이는 n, n-1, n-2, ... 3까지를 곱한 값이다.

> n의 최대값이 백만인데, 1000000!을 담을 수 있는 자료형이 없다. 1, n, n(n-1), ... n!의 각 항에 모듈로 연산을 미리 적용한 후 +, - 연산을 하는 것이 적절하다.

> 물론 결괏값을 담을 변수도 업데이트 할 때마다 모듈로 연산을 해줘야 한다. 모듈로 연산 값이 10억이고 n!의 값도 충분히 커질 수 있으므로 안전하게 자료형은 long을 사용하자.

> n = 1일 때는 강제로 0을 출력해줘야 한다.

여기까지는 첫번째시도에 해당한다.

---

- 1명일 때

  $_1C_0 * 1! -\ _1C_1 * 0!$

- 2명일 때

  $_2C_0 * 2! -\ _2C_1 * 1! +\ _2C_2 * 0!$

- 3명일 때

  $_3C_0 * 3! -\ _3C_1 * 2! +\ _3C_2 * 1! -\ _3C_3 * 0!$

> 규칙이 보인다.

$i - 1$명일 때의 식과 $i$명일 때의 식을 보면, $i$명일 때의 식은 $i - 1$명일 때의 각 항에 $i$를 곱하고, 그 결과에서 $_iC_i* 0!$을 더하거나 뺀 것과 그 값이 같다.
